<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@700&display=swap" rel="stylesheet">
<title>Bebra 71</title>
<style>
  :root {
    --blue: #4da8ff;
    --blue-dark: #003087;
    --font: 'Segoe UI', sans-serif;
  }
  * {
    box-sizing: border-box;
  }
  html, body {
    margin: 0; padding: 0;
    height: 100vh; width: 100vw;
    font-family: var(--font);
    background: radial-gradient(circle at 50% 50%, #001d3d, #003087);
    color: white;
    overflow: hidden;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    position: relative;
  }
  .stars, .stars2, .stars3 {
    position: absolute;
    top: 0; left: 0;
    width: 100%; height: 100%;
    background: transparent;
    z-index: -1;
  }
  .stars {
    background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg"><circle cx="2" cy="2" r="2" fill="white"/></svg>') repeat;
    background-size: 40px 40px;
    opacity: 0.9;
    filter: blur(1.5px);
    animation: twinkle 10s infinite ease-in-out;
  }
  .stars2 {
    background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg"><circle cx="3" cy="3" r="3" fill="white"/></svg>') repeat;
    background-size: 60px 60px;
    opacity: 0.7;
    filter: blur(1px);
    animation: twinkle 8s infinite ease-in-out;
  }
  .stars3 {
    background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg"><circle cx="4" cy="4" r="4" fill="white"/></svg>') repeat;
    background-size: 80px 80px;
    opacity: 0.5;
    filter: blur(0.5px);
    animation: twinkle 6s infinite ease-in-out;
  }
  @keyframes twinkle {
    0% { opacity: 0.5; transform: scale(0.6); }
    50% { opacity: 1; transform: scale(1); }
    100% { opacity: 0.5; transform: scale(0.6); }
  }
  button {
    position: relative;
    overflow: hidden;
    background: var(--blue);
    border: none;
    color: white;
    padding: 10px 25px;
    margin: 10px;
    border-radius: 12px;
    font-size: 1rem;
    cursor: pointer;
    width: 90vw;
    max-width: 300px;
    transition: background 0.3s ease, transform 0.3s ease;
  }
  button:hover {
    background: var(--blue-dark);
    transform: scale(1.05);
  }
  button:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }
  button::after {
    content: '';
    position: absolute;
    background: radial-gradient(circle, rgba(77, 168, 255, 0.5), transparent);
    width: 0;
    height: 0;
    border-radius: 50%;
    transform: translate(-50%, -50%);
    opacity: 0;
    transition: width 0.6s ease, height 0.6s ease, opacity 0.6s ease;
  }
  button.ripple::after {
    width: 200px;
    height: 200px;
    opacity: 1;
  }
  .container {
    display: none;
    flex-direction: column;
    align-items: center;
    width: 100%;
    position: relative;
    z-index: 1;
  }
  .container.visible {
    display: flex;
  }
  .container.visible button:nth-child(odd) {
    animation: slide-in-left 1s cubic-bezier(0.4, 0, 0.2, 1) forwards;
  }
  .container.visible button:nth-child(even) {
    animation: slide-in-right 1s cubic-bezier(0.4, 0, 0.2, 1) forwards;
  }
  .container.visible button:first-child,
  .container.visible #asalScreen,
  .container.visible #studentInfo {
    animation: drop-in 1s cubic-bezier(0.4, 0, 0.2, 1) forwards;
  }
  .container.visible button:last-child {
    animation: pull-up 1s cubic-bezier(0.4, 0, 0.2, 1) forwards;
  }
  .container.visible input {
    animation: drop-in 1s cubic-bezier(0.4, 0, 0.2, 1) forwards;
  }
  .container:not(.visible) button,
  .container:not(.visible) input,
  .container:not(.visible) #asalScreen,
  .container:not(.visible) #studentInfo {
    animation: fade-out 0.5s cubic-bezier(0.4, 0, 0.2, 1) forwards;
  }
  @keyframes slide-in-left {
    0% { transform: translateX(-100%); opacity: 0; }
    100% { transform: translateX(0); opacity: 1; }
  }
  @keyframes slide-in-right {
    0% { transform: translateX(100%); opacity: 0; }
    100% { transform: translateX(0); opacity: 1; }
  }
  @keyframes drop-in {
    0% { transform: translateY(-100vh); opacity: 0; }
    100% { transform: translateY(0); opacity: 1; }
  }
  @keyframes pull-up {
    0% { transform: translateY(100vh); opacity: 0; }
    100% { transform: translateY(0); opacity: 1; }
  }
  @keyframes fade-out {
    0% { transform: translateX(0); opacity: 1; }
    100% { transform: translateX(0); opacity: 0; }
  }
  @keyframes text-appear {
    0% { opacity: 0; transform: translateY(20px); }
    100% { opacity: 1; transform: translateY(0); }
  }
  body.transitioning {
    pointer-events: none;
  }
  #intro {
    position: fixed;
    top: 0; left: 0; width: 100vw; height: 100vh;
    color: var(--blue);
    font-family: 'Orbitron', sans-serif;
    font-size: 4em;
    font-weight: 700;
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 9999;
    opacity: 1;
    animation: introfade 4s cubic-bezier(0.4, 0, 0.2, 1) forwards;
    text-shadow: 0 0 10px rgba(77, 168, 255, 0.5);
  }
  @keyframes introfade {
    0% { opacity: 0; transform: scale(0.5); text-shadow: 0 0 10px rgba(77, 168, 255, 0.5); }
    50% { opacity: 1; transform: scale(1.1); text-shadow: 0 0 20px rgba(77, 168, 255, 0.8); }
    100% { opacity: 0; transform: scale(1); visibility: hidden; text-shadow: 0 0 10px rgba(77, 168, 255, 0.5); }
  }
  input[type=password], input[type=text] {
    padding: 10px;
    border-radius: 8px;
    margin: 10px;
    font-size: 16px;
    border: 1px solid var(--blue);
    background: transparent;
    color: white;
    width: 80vw;
    max-width: 300px;
    -webkit-text-security: disc;
  }
  input[type=text] {
    -webkit-text-security: none;
  }
  #version {
    position: fixed;
    top: 10px;
    right: 20px;
    font-size: 13px;
    color: #aaa;
    z-index: 10000;
  }
  #consoleBtn {
    position: fixed;
    top: 10px;
    left: 20px;
    font-size: 13px;
    z-index: 10000;
    display: none;
  }
  @media (min-width: 768px) {
    #consoleBtn {
      display: block;
    }
    #intro {
      font-size: 4em;
    }
    #asalScreen, #studentInfo {
      font-size: 1.8em;
    }
    #disclaimer {
      font-size: 1em;
    }
  }
  @media (max-width: 767px) {
    #intro {
      font-size: 2.5em;
    }
    #asalScreen, #studentInfo {
      font-size: 1.2em;
      padding: 10px;
      line-height: 1.4;
    }
    #disclaimer {
      font-size: 0.8em;
      padding: 5px;
    }
  }
  #asalScreen, #studentInfo {
    text-align: center;
    color: var(--blue);
    animation: neon 2s ease-in-out infinite alternate;
    letter-spacing: 2px;
    padding: 20px;
    margin-bottom: 20px;
    max-width: 90vw;
    word-wrap: break-word;
  }
  #studentInfo span {
    display: block;
    animation: text-appear 0.5s ease forwards;
    animation-delay: calc(0.1s * var(--i));
  }
  #disclaimer {
    color: #ff3333;
    text-align: center;
    padding: 10px;
    max-width: 90vw;
    word-wrap: break-word;
  }
  @keyframes neon {
    0% { text-shadow: 0 0 5px rgba(77, 168, 255, 0.5); }
    100% { text-shadow: 0 0 10px rgba(77, 168, 255, 0.8); }
  }
  iframe {
    width: 95vw;
    height: 60vh;
    margin: 10px auto;
    border: none;
    display: block;
  }
  audio, video {
    width: 95vw;
    max-height: 40vh;
    margin: 10px auto;
    display: block;
  }
  audio.hidden {
    display: none;
  }
</style>
</head>
<body>
  <div class="stars"></div>
  <div class="stars2"></div>
  <div class="stars3"></div>
  <div id="intro">Said</div>
  <div id="version">v2.6</div>
  <button id="consoleBtn">–ö–æ–Ω—Å–æ–ª—å</button>

  <div class="container auth hidden">
    <input id="tokenInput" type="password" placeholder="–í–≤–µ–¥–∏—Ç–µ —Ç–æ–∫–µ–Ω" autocomplete="off" />
    <button id="loginBtn">–í–æ–π—Ç–∏</button>
  </div>

  <div class="container menu hidden">
    <button data-menu="musicMenu">–ü–µ—Å–Ω—è</button>
    <button data-menu="videoMenu">–ö–Ω–æ–ø–∫–∞ –ù–ï –Ω–∞–∂–∏–º–∞—Ç—å</button>
    <button data-menu="asalMenu">üíñ –ú—ã –ª—é–±–∏–º –ê—Å–∞–ª—å</button>
    <button data-menu="gdzMenu">–ì–î–ó</button>
    <button data-menu="studentsMenu">–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö</button>
    <button id="logoutBtn">–í—ã—Ö–æ–¥</button>
  </div>

  <div class="container submenu hidden" id="musicMenu">
    <audio id="audio" controls class="hidden"></audio>
    <button data-audio="round-start.mp3">–ê–º–æ–Ω–≥ –ê—Å</button>
    <button data-audio="tum-tum-tum-sahur.mp3">–¢—É–º –¢—É–º –°–∞—Ö—É—Ä</button>
    <button data-audio="audio_2025-08-01_23-01-57.mp3">–≠—Ç–æ –Ω–µ –∑–∞–±—É–¥–µ–º –¢–∏–º—É—Ä–∞</button>
    <button class="back">–ù–∞–∑–∞–¥ –≤ –º–µ–Ω—é</button>
  </div>

  <div class="container submenu hidden" id="videoMenu">
    <video id="video" controls class="hidden"></video>
    <button data-video="oY9EGRFUCQDcF7MAKmJgfVEloRIiRIjFkerREB.mp4">–¢–∏–º—É—Ä</button>
    <button data-video="oMTvPfb7222222.mp4">–ú–ì–†–†</button>
    <button class="back">–ù–∞–∑–∞–¥ –≤ –º–µ–Ω—é</button>
  </div>

  <div class="container submenu hidden" id="asalMenu">
    <audio id="asalAudio" autoplay></audio>
    <div id="asalScreen">üíñ –ú—ã –ª—é–±–∏–º –ê—Å–∞–ª—å üíñ</div>
    <button class="back">–ù–∞–∑–∞–¥ –≤ –º–µ–Ω—é</button>
  </div>

  <div class="container submenu hidden" id="gdzMenu">
    <iframe src="" id="gdzFrame" allowfullscreen></iframe>
    <button data-gdzkey="english">–ì–î–ó –ê–Ω–≥–ª–∏–π—Å–∫–∏–π</button>
    <button class="back">–ù–∞–∑–∞–¥ –≤ –º–µ–Ω—é</button>
  </div>

  <div class="container submenu hidden" id="studentsMenu">
    <div id="disclaimer">–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –º–æ—à–µ–Ω–Ω–∏—á–µ—Å—Ç–≤–∞ –∏–ª–∏ –¥—Ä—É–≥–∏—Ö –Ω–µ–∑–∞–∫–æ–Ω–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π</div>
    <input id="studentPassInput" type="password" placeholder="–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å" autocomplete="off" />
    <button id="studentPassBtn">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å</button>
  </div>

  <div class="container submenu hidden" id="studentsListMenu">
    <input id="studentTokenInput" type="text" placeholder="–í–≤–µ–¥–∏—Ç–µ —Ç–æ–∫–µ–Ω –¥–æ—Å—Ç—É–ø–∞" autocomplete="off" />
    <button data-student="timur" data-encrypted="13245533499">13245533499</button>
    <button class="back">–ù–∞–∑–∞–¥ –≤ –º–µ–Ω—é</button>
  </div>

  <div class="container submenu hidden" id="studentInfoMenu">
    <div id="studentInfo"></div>
    <button class="back">–ù–∞–∑–∞–¥ –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö</button>
  </div>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/12.0.0/firebase-app.js";
  import { getDatabase, ref, get, set, remove } from "https://www.gstatic.com/firebasejs/12.0.0/firebase-database.js";

  const firebaseConfig = {
    apiKey: "AIzaSyBTcH3_tri2L7AHLh1e-YD-0s-QSthuE6Q",
    authDomain: "disk-c98ee.firebaseapp.com",
    projectId: "disk-c98ee",
    storageBucket: "disk-c98ee.appspot.com",
    messagingSenderId: "59577059636",
    appId: "1:59577059636:web:e98f456d054cc360747d61",
    databaseURL: "https://disk-c98ee-default-rtdb.firebaseio.com"
  };

  const app = initializeApp(firebaseConfig);
  const db = getDatabase(app);

  const tokenInput = document.getElementById('tokenInput');
  const loginBtn = document.getElementById('loginBtn');
  const auth = document.querySelector('.auth');
  const menu = document.querySelector('.menu');
  const audio = document.getElementById('audio');
  const video = document.getElementById('video');
  const asalAudio = document.getElementById('asalAudio');
  const gdzFrame = document.getElementById('gdzFrame');
  const musicMenu = document.getElementById('musicMenu');
  const videoMenu = document.getElementById('videoMenu');
  const asalMenu = document.getElementById('asalMenu');
  const gdzMenu = document.getElementById('gdzMenu');
  const studentsMenu = document.getElementById('studentsMenu');
  const studentsListMenu = document.getElementById('studentsListMenu');
  const studentInfoMenu = document.getElementById('studentInfoMenu');
  const studentPassInput = document.getElementById('studentPassInput');
  const studentPassBtn = document.getElementById('studentPassBtn');
  const studentTokenInput = document.getElementById('studentTokenInput');
  const studentInfo = document.getElementById('studentInfo');
  const backButtons = document.querySelectorAll('.back');
  const consoleBtn = document.getElementById('consoleBtn');

  const studentsData = {
    timur: {
      name: '–¢–∏–º—É—Ä',
      surname: '–ù—É—Ä–∞–ª–∏–µ–≤',
      patronymic: '–ú—É–∑–∞—Ñ—Ñ–∞—Ä–æ–≤–∏—á',
      birthDate: '28.09.2011',
      father: '–ú—É–∑–∞—Ñ—Ñ–∞—Ä –ù—É—Ä–∞–ª–∏–µ–≤',
      mother: '–ú–∞—Ñ—Ç—É–Ω–∞ (–≤–æ–∑–º–æ–∂–Ω–æ, –ù—É—Ä–∞–ª–∏–µ–≤–∞)',
      class: '8–î Vosiq',
      phone: '+998946372464',
      motherPhone: '+998900060030',
      fatherPhone: '+998988122711',
      siblings: '–°–µ—Å—Ç—Ä–∞: –ê—Å–∞–ª—å –ù—É—Ä–∞–ª–∏–µ–≤–∞, 12 –ª–µ—Ç, 6–ö Vosiq'
    }
  };

  document.addEventListener('mousemove', (e) => {
    const x = (e.clientX / window.innerWidth) * 100;
    const y = (e.clientY / window.innerHeight) * 100;
    document.body.style.background = `radial-gradient(circle at ${x}% ${y}%, #001d3d, #003087)`;
  });

  document.querySelectorAll('button').forEach(button => {
    button.addEventListener('touchstart', (e) => {
      const rect = button.getBoundingClientRect();
      const x = e.touches[0].clientX - rect.left;
      const y = e.touches[0].clientY - rect.top;
      button.style.setProperty('--ripple-x', `${x}px`);
      button.style.setProperty('--ripple-y', `${y}px`);
      button.classList.add('ripple');
      setTimeout(() => button.classList.remove('ripple'), 600);
    });
  });

  function showElement(el) {
    if (!el) return;
    console.log('Showing element:', el.id || el.className);
    el.classList.remove('hidden');
    el.classList.add('visible');
    document.body.classList.add('transitioning');
    setTimeout(() => document.body.classList.remove('transitioning'), 1000);
  }

  function hideElement(el) {
    if (!el) return;
    console.log('Hiding element:', el.id || el.className);
    el.classList.remove('visible');
    el.classList.add('hidden');
  }

  function hideElements(elements) {
    elements.forEach(el => hideElement(el));
  }

  function openMenu(menuId) {
    console.log('Opening menu:', menuId);
    hideElements([menu, auth, musicMenu, videoMenu, asalMenu, gdzMenu, studentsMenu, studentsListMenu, studentInfoMenu]);
    audio.pause(); audio.classList.add('hidden'); audio.src = '';
    video.pause(); video.classList.add('hidden'); video.src = '';
    asalAudio.pause(); asalAudio.classList.add('hidden'); asalAudio.src = '';
    studentInfo.textContent = '';
    studentTokenInput.value = '';
    const el = document.getElementById(menuId);
    if (el) {
      showElement(el);
      if (menuId === 'asalMenu') {
        asalAudio.src = 'ppol.mp3';
        asalAudio.play().catch(err => {
          console.error('Asal audio playback error:', err);
          alert('–û—à–∏–±–∫–∞ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è ppol.mp3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞–ª–∏—á–∏–µ —Ñ–∞–π–ª–∞.');
        });
      }
    }
  }

  async function checkToken(token) {
    try {
      const snapshot = await get(ref(db, 'tokens/' + token));
      console.log('Token check result:', snapshot.exists());
      return snapshot.exists();
    } catch (error) {
      console.error('Token check error:', error);
      alert('–û—à–∏–±–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ç–æ–∫–µ–Ω–∞: ' + error.message);
      return false;
    }
  }

  async function checkStudentToken(token) {
    try {
      const snapshot = await get(ref(db, 'studentTokens/' + token));
      console.log('Student token check result:', snapshot.exists());
      return snapshot.exists();
    } catch (error) {
      console.error('Student token check error:', error);
      alert('–û—à–∏–±–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ç–æ–∫–µ–Ω–∞ –¥–æ—Å—Ç—É–ø–∞: ' + error.message);
      return false;
    }
  }

  loginBtn.addEventListener('click', async () => {
    const token = tokenInput.value.trim();
    if (!token) return alert('–í–≤–µ–¥–∏—Ç–µ —Ç–æ–∫–µ–Ω');
    loginBtn.disabled = true;
    const valid = await checkToken(token);
    loginBtn.disabled = false;
    if (valid) {
      console.log('Login successful');
      hideElement(auth);
      showElement(menu);
    } else {
      alert('–ù–µ–≤–µ—Ä–Ω—ã–π —Ç–æ–∫–µ–Ω');
    }
  });

  document.getElementById('logoutBtn').addEventListener('click', () => {
    console.log('Logging out');
    hideElement(menu);
    hideElements(document.querySelectorAll('.submenu'));
    tokenInput.value = '';
    showElement(auth);
  });

  menu.querySelectorAll('button[data-menu]').forEach(btn => {
    btn.addEventListener('click', (e) => {
      e.stopPropagation();
      console.log('Menu button clicked:', btn.getAttribute('data-menu'));
      hideElement(menu);
      const menuId = btn.getAttribute('data-menu');
      openMenu(menuId);
    });
  });

  backButtons.forEach(btn => {
    btn.addEventListener('click', (e) => {
      e.stopPropagation();
      console.log('Back button clicked');
      if (studentInfoMenu.classList.contains('visible')) {
        hideElement(studentInfoMenu);
        showElement(studentsListMenu);
      } else if (studentsListMenu.classList.contains('visible')) {
        hideElement(studentsListMenu);
        showElement(studentsMenu);
      } else {
        hideElements(document.querySelectorAll('.submenu'));
        showElement(menu);
      }
    });
  });

  musicMenu.querySelectorAll('button[data-audio]').forEach(btn => {
    btn.addEventListener('click', (e) => {
      e.stopPropagation();
      console.log('Audio button clicked:', btn.getAttribute('data-audio'));
      const audioFile = btn.getAttribute('data-audio');
      video.pause();
      video.classList.add('hidden');
      asalAudio.pause();
      asalAudio.classList.add('hidden');
      audio.src = audioFile;
      audio.classList.remove('hidden');
      audio.play().catch(err => console.error('Audio playback error:', err));
    });
  });

  videoMenu.querySelectorAll('button[data-video]').forEach(btn => {
    btn.addEventListener('click', (e) => {
      e.stopPropagation();
      console.log('Video button clicked:', btn.getAttribute('data-video'));
      const videoFile = btn.getAttribute('data-video');
      audio.pause();
      audio.classList.add('hidden');
      asalAudio.pause();
      asalAudio.classList.add('hidden');
      video.src = videoFile;
      video.classList.remove('hidden');
      video.play().catch(err => console.error('Video playback error:', err));
    });
  });

  const gdzUrls = {
    'english': 'https://gdz.ru/class-7/english/spotlight-7/'
  };

  gdzMenu.querySelectorAll('button[data-gdzkey]').forEach(btn => {
    btn.addEventListener('click', (e) => {
      e.stopPropagation();
      console.log('GDZ button clicked:', btn.getAttribute('data-gdzkey'));
      const key = btn.getAttribute('data-gdzkey');
      if (gdzUrls[key]) {
        gdzFrame.src = gdzUrls[key];
      }
    });
  });

  studentPassBtn.addEventListener('click', () => {
    const pass = studentPassInput.value.trim();
    if (pass === 'V228') {
      console.log('Student menu password correct');
      hideElement(studentsMenu);
      showElement(studentsListMenu);
      studentPassInput.value = '';
    } else {
      alert('–ù–µ–≤–µ—Ä–Ω—ã–π –ø–∞—Ä–æ–ª—å');
    }
  });

  studentsListMenu.querySelectorAll('button[data-student]').forEach(btn => {
    btn.addEventListener('click', async (e) => {
      e.stopPropagation();
      console.log('Student button clicked:', btn.getAttribute('data-student'));
      const studentId = btn.getAttribute('data-student');
      const token = studentTokenInput.value.trim();
      if (!token) return alert('–í–≤–µ–¥–∏—Ç–µ —Ç–æ–∫–µ–Ω –¥–æ—Å—Ç—É–ø–∞');
      const valid = await checkStudentToken(token);
      if (valid) {
        const data = studentsData[studentId];
        if (data) {
          studentInfo.innerHTML = `
            <span style="--i:1">–ò–º—è: ${data.name}</span>
            <span style="--i:2">–§–∞–º–∏–ª–∏—è: ${data.surname}</span>
            <span style="--i:3">–û—Ç—á–µ—Å—Ç–≤–æ: ${data.patronymic}</span>
            <span style="--i:4">–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è: ${data.birthDate}</span>
            <span style="--i:5">–û—Ç–µ—Ü: ${data.father}</span>
            <span style="--i:6">–ú–∞—Ç—å: ${data.mother}</span>
            <span style="--i:7">–ö–ª–∞—Å—Å: ${data.class}</span>
            <span style="--i:8">–¢–µ–ª–µ—Ñ–æ–Ω: ${data.phone}</span>
            <span style="--i:9">–¢–µ–ª–µ—Ñ–æ–Ω –º–∞—Ç–µ—Ä–∏: ${data.motherPhone}</span>
            <span style="--i:10">–¢–µ–ª–µ—Ñ–æ–Ω –æ—Ç—Ü–∞: ${data.fatherPhone}</span>
            <span style="--i:11">–ë—Ä–∞—Ç—å—è/—Å—ë—Å—Ç—Ä—ã: ${data.siblings}</span>
          `;
          hideElement(studentsListMenu);
          showElement(studentInfoMenu);
        }
      } else {
        alert('–ù–µ–≤–µ—Ä–Ω—ã–π —Ç–æ–∫–µ–Ω –¥–æ—Å—Ç—É–ø–∞');
      }
    });
  });

  consoleBtn.addEventListener('click', async () => {
    const consoleToken = prompt('–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å –¥–ª—è –∫–æ–Ω—Å–æ–ª–∏');
    if (consoleToken !== 'V') {
      alert('–ù–µ–≤–µ—Ä–Ω—ã–π –ø–∞—Ä–æ–ª—å');
      return;
    }
    const panel = document.createElement('div');
    panel.style = `
      position: fixed; top: 50px; left: 50%; transform: translateX(-50%);
      background: #001d3d; color: white; padding: 20px; border-radius: 10px;
      z-index: 100000; max-width: 400px; width: 90vw;
      max-height: 70vh; overflow-y: auto;
    `;
    panel.innerHTML = `
      <h2>–ö–æ–Ω—Å–æ–ª—å: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞–º–∏</h2>
      <input id="newTokenInput" placeholder="–ù–æ–≤—ã–π —Ç–æ–∫–µ–Ω" style="width: 80%; padding: 8px; margin-bottom: 10px; border-radius: 6px; border: 1px solid var(--blue); background: transparent; color: white;" />
      <button id="addTokenBtn">–î–æ–±–∞–≤–∏—Ç—å —Ç–æ–∫–µ–Ω</button>
      <input id="newStudentTokenInput" placeholder="–ù–æ–≤—ã–π —Ç–æ–∫–µ–Ω –¥–æ—Å—Ç—É–ø–∞" style="width: 80%; padding: 8px; margin: 10px 0; border-radius: 6px; border: 1px solid var(--blue); background: transparent; color: white;" />
      <button id="addStudentTokenBtn">–î–æ–±–∞–≤–∏—Ç—å —Ç–æ–∫–µ–Ω –¥–æ—Å—Ç—É–ø–∞</button>
      <button id="closeConsoleBtn" style="margin-left: 10px; background: var(--blue-dark);">–ó–∞–∫—Ä—ã—Ç—å</button>
      <div id="tokensList" style="margin-top: 15px;">–ó–∞–≥—Ä—É–∑–∫–∞ —Ç–æ–∫–µ–Ω–æ–≤...</div>
      <div id="studentTokensList" style="margin-top: 15px;">–ó–∞–≥—Ä—É–∑–∫–∞ —Ç–æ–∫–µ–Ω–æ–≤ –¥–æ—Å—Ç—É–ø–∞...</div>
    `;
    document.body.appendChild(panel);

    const newTokenInput = panel.querySelector('#newTokenInput');
    const addTokenBtn = panel.querySelector('#addTokenBtn');
    const newStudentTokenInput = panel.querySelector('#newStudentTokenInput');
    const addStudentTokenBtn = panel.querySelector('#addStudentTokenBtn');
    const closeConsoleBtn = panel.querySelector('#closeConsoleBtn');
    const tokensList = panel.querySelector('#tokensList');
    const studentTokensList = panel.querySelector('#studentTokensList');

    async function updateTokensList() {
      try {
        tokensList.innerHTML = '–ó–∞–≥—Ä—É–∑–∫–∞ —Ç–æ–∫–µ–Ω–æ–≤...';
        const snapshot = await get(ref(db, 'tokens'));
        console.log('Tokens snapshot:', snapshot.val());
        if (snapshot.exists()) {
          const tokens = snapshot.val();
          tokensList.innerHTML = '';
          if (Object.keys(tokens).length === 0) {
            tokensList.textContent = '–¢–æ–∫–µ–Ω—ã –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç';
          } else {
            Object.keys(tokens).forEach(t => {
              const tokenEl = document.createElement('div');
              tokenEl.style = 'display:flex; justify-content:space-between; margin-bottom:6px; border-bottom: 1px solid #444; padding-bottom:4px;';
              tokenEl.textContent = t;
              const delBtn = document.createElement('button');
              delBtn.textContent = '–£–¥–∞–ª–∏—Ç—å';
              delBtn.style.background = '#a00';
              delBtn.style.color = 'white';
              delBtn.style.border = 'none';
              delBtn.style.borderRadius = '6px';
              delBtn.style.cursor = 'pointer';
              delBtn.addEventListener('click', async () => {
                try {
                  await remove(ref(db, 'tokens/' + t));
                  console.log('Token removed:', t);
                  updateTokensList();
                } catch (error) {
                  console.error('Error removing token:', error);
                  alert('–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è —Ç–æ–∫–µ–Ω–∞: ' + error.message);
                }
              });
              tokenEl.appendChild(delBtn);
              tokensList.appendChild(tokenEl);
            });
          }
        } else {
          tokensList.textContent = '–¢–æ–∫–µ–Ω—ã –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç';
        }
      } catch (error) {
        console.error('Error fetching tokens:', error);
        tokensList.textContent = '–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ç–æ–∫–µ–Ω–æ–≤: ' + error.message;
      }
    }

    async function updateStudentTokensList() {
      try {
        studentTokensList.innerHTML = '–ó–∞–≥—Ä—É–∑–∫–∞ —Ç–æ–∫–µ–Ω–æ–≤ –¥–æ—Å—Ç—É–ø–∞...';
        const snapshot = await get(ref(db, 'studentTokens'));
        console.log('Student tokens snapshot:', snapshot.val());
        if (snapshot.exists()) {
          const tokens = snapshot.val();
          studentTokensList.innerHTML = '';
          if (Object.keys(tokens).length === 0) {
            studentTokensList.textContent = '–¢–æ–∫–µ–Ω—ã –¥–æ—Å—Ç—É–ø–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç';
          } else {
            Object.keys(tokens).forEach(t => {
              const tokenEl = document.createElement('div');
              tokenEl.style = 'display:flex; justify-content:space-between; margin-bottom:6px; border-bottom: 1px solid #444; padding-bottom:4px;';
              tokenEl.textContent = t;
              const delBtn = document.createElement('button');
              delBtn.textContent = '–£–¥–∞–ª–∏—Ç—å';
              delBtn.style.background = '#a00';
              delBtn.style.color = 'white';
              delBtn.style.border = 'none';
              delBtn.style.borderRadius = '6px';
              delBtn.style.cursor = 'pointer';
              delBtn.addEventListener('click', async () => {
                try {
                  await remove(ref(db, 'studentTokens/' + t));
                  console.log('Student token removed:', t);
                  updateStudentTokensList();
                } catch (error) {
                  console.error('Error removing student token:', error);
                  alert('–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è —Ç–æ–∫–µ–Ω–∞ –¥–æ—Å—Ç—É–ø–∞: ' + error.message);
                }
              });
              tokenEl.appendChild(delBtn);
              studentTokensList.appendChild(tokenEl);
            });
          }
        } else {
          studentTokensList.textContent = '–¢–æ–∫–µ–Ω—ã –¥–æ—Å—Ç—É–ø–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç';
        }
      } catch (error) {
        console.error('Error fetching student tokens:', error);
        studentTokensList.textContent = '–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ç–æ–∫–µ–Ω–æ–≤ –¥–æ—Å—Ç—É–ø–∞: ' + error.message;
      }
    }

    addTokenBtn.addEventListener('click', async () => {
      const newToken = newTokenInput.value.trim();
      if (!newToken) return alert('–í–≤–µ–¥–∏—Ç–µ —Ç–æ–∫–µ–Ω –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è');
      try {
        await set(ref(db, 'tokens/' + newToken), true);
        console.log('Token added:', newToken);
        newTokenInput.value = '';
        updateTokensList();
      } catch (error) {
        console.error('Error adding token:', error);
        alert('–û—à–∏–±–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ç–æ–∫–µ–Ω–∞: ' + error.message);
      }
    });

    addStudentTokenBtn.addEventListener('click', async () => {
      const newStudentToken = newStudentTokenInput.value.trim();
      if (!newStudentToken) return alert('–í–≤–µ–¥–∏—Ç–µ —Ç–æ–∫–µ–Ω –¥–æ—Å—Ç—É–ø–∞ –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è');
      try {
        await set(ref(db, 'studentTokens/' + newStudentToken), true);
        console.log('Student token added:', newStudentToken);
        newStudentTokenInput.value = '';
        updateStudentTokensList();
      } catch (error) {
        console.error('Error adding student token:', error);
        alert('–û—à–∏–±–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ç–æ–∫–µ–Ω–∞ –¥–æ—Å—Ç—É–ø–∞: ' + error.message);
      }
    });

    closeConsoleBtn.addEventListener('click', () => {
      panel.remove();
    });

    updateTokensList();
    updateStudentTokensList();
  });

  window.addEventListener('load', () => {
    setTimeout(() => {
      const intro = document.getElementById('intro');
      intro.style.display = 'none';
      showElement(auth);
    }, 4000);
  });
</script>
</body>
</html>

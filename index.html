<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>–ú—ã –ª—é–±–∏–º –ê—Å–∞–ª—å</title>
<style>
  :root {
    --pink: #ff4da6;
    --pink-dark: #ff007f;
    --bg1: #000000;
    --bg2: #222222;
    --font: 'Segoe UI', sans-serif;
  }
  * {
    box-sizing: border-box;
    transition: all 0.3s ease;
  }
  html, body {
    margin: 0; padding: 0;
    height: 100vh; width: 100vw;
    font-family: var(--font);
    background: linear-gradient(135deg, var(--bg1), var(--bg2));
    animation: bgshift 6s infinite alternate ease-in-out;
    color: white;
    overflow-x: hidden;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
  }
  #intro {
    position: fixed;
    top:0; left:0; width: 100vw; height: 100vh;
    background: black;
    color: white;
    font-size: 3em;
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 9999;
    opacity: 1;
    transition: opacity 1s ease;
  }
  @keyframes bgshift {
    0% {background: linear-gradient(135deg, var(--bg1), var(--bg2));}
    100% {background: linear-gradient(135deg, #1c1c1c, #000000);}
  }
  .hidden {display:none !important;}
  button {
    background: var(--pink);
    border: none;
    color: white;
    padding: 10px 25px;
    margin: 10px;
    border-radius: 12px;
    font-size: 1rem;
    cursor: pointer;
    box-shadow: 0 4px 8px rgba(255, 77, 166, 0.3);
    width: 90vw;
    max-width: 300px;
    transition: background 0.3s ease, transform 0.3s ease;
  }
  button:hover {
    background: var(--pink-dark);
    transform: scale(1.05);
  }
  input[type=password] {
    padding: 10px;
    border-radius: 8px;
    margin: 10px;
    font-size: 16px;
    border: 1px solid var(--pink);
    background: transparent;
    color: white;
    width: 80vw;
    max-width: 300px;
    -webkit-text-security: disc; /* —Ç–æ—á–∫–∏ –≤–º–µ—Å—Ç–æ —Ç–µ–∫—Å—Ç–∞ */
  }
  #version {
    position: fixed;
    top: 10px;
    right: 20px;
    font-size: 13px;
    color: #888;
    z-index: 10000;
  }
  #adminBtn {
    position: fixed;
    top: 10px;
    left: 20px;
    font-size: 13px;
    z-index: 10000;
    cursor: pointer;
  }
  .container {
    display: flex;
    flex-direction: column;
    align-items: center;
    width: 100%;
    opacity: 0;
    transform: translateY(20px);
    transition: opacity 0.5s ease, transform 0.5s ease;
  }
  .container.visible {
    opacity: 1;
    transform: translateY(0);
  }
  #asalText {
    font-size: 2em;
    color: var(--pink);
    animation: neon 2s ease-in-out infinite alternate;
    letter-spacing: 2px;
    padding: 20px;
    text-shadow: 0 0 5px var(--pink), 0 0 10px var(--pink), 0 0 20px var(--pink-dark);
    text-align: center;
  }
  @keyframes neon {
    0% {
      text-shadow: 0 0 10px var(--pink), 0 0 20px var(--pink-dark);
    }
    100% {
      text-shadow: 0 0 20px var(--pink), 0 0 40px var(--pink-dark);
    }
  }
  iframe {
    width: 95vw;
    height: 80vh;
    margin-top: 20px;
    border: none;
  }
  audio, video {
    width: 95vw;
    max-height: 60vh;
    margin-top: 20px;
  }
  ul {
    list-style: none;
    padding: 0;
    margin: 10px 0;
    width: 90vw;
    max-width: 300px;
    overflow-wrap: break-word;
  }
  ul li {
    background: rgba(255, 77, 166, 0.3);
    padding: 6px 12px;
    margin-bottom: 4px;
    border-radius: 8px;
    word-break: break-all;
  }
</style>
</head>
<body>

<div id="intro">Said</div>
<div id="version">v2.1</div>
<button id="adminBtn">–ö—Ä–µ–∞—Ç–æ—Ä</button>

<div class="container auth hidden">
  <input id="tokenInput" type="password" placeholder="–í–≤–µ–¥–∏—Ç–µ —Ç–æ–∫–µ–Ω" autocomplete="off" />
  <button id="loginBtn">–í–æ–π—Ç–∏</button>
</div>

<div class="container menu hidden">
  <button data-menu="musicMenu">–ü–µ—Å–Ω—è</button>
  <button data-menu="videoMenu">–ö–Ω–æ–ø–∫–∞ –ù–ï –Ω–∞–∂–∏–º–∞—Ç—å</button>
  <button data-menu="asalMenu">üíñ –ú—ã –ª—é–±–∏–º –ê—Å–∞–ª—å</button>
  <button data-menu="gdzMenu">–ì–î–ó</button>
  <button id="logoutBtn">–í—ã—Ö–æ–¥</button>
</div>

<!-- –ü–æ–¥–º–µ–Ω—é –ü–µ—Å–Ω–∏ -->
<div class="container submenu hidden" id="musicMenu">
  <button data-audio="round-start.mp3">–ê–º–æ–Ω–≥ –ê—Å</button>
  <button data-audio="tum-tum-tum-sahur.mp3">–¢—É–º –¢—É–º –°–∞—Ö—É—Ä</button>
  <button data-audio="audio_2025-08-01_23-01-57.mp3">–≠—Ç–æ –Ω–µ –∑–∞–±—É–¥–µ–º –¢–∏–º—É—Ä–∞</button>
  <button class="backBtn">–ù–∞–∑–∞–¥ –≤ –º–µ–Ω—é</button>
</div>

<!-- –ü–æ–¥–º–µ–Ω—é –í–∏–¥–µ–æ -->
<div class="container submenu hidden" id="videoMenu">
  <button data-video="oY9EGRFUCQDcF7MAKmJgfVEloRIiRIjFkerREB.mp4">–¢–∏–º—É—Ä</button>
  <button data-video="oMTvPfb7222222.mp4">–ú–ì–†–†</button>
  <button class="backBtn">–ù–∞–∑–∞–¥ –≤ –º–µ–Ω—é</button>
</div>

<!-- –ü–æ–¥–º–µ–Ω—é –ú—ã –ª—é–±–∏–º –ê—Å–∞–ª—å -->
<div class="container submenu hidden" id="asalMenu">
  <div id="asalText">üíñ –ú—ã –ª—é–±–∏–º –ê—Å–∞–ª—å üíñ</div>
  <button class="backBtn">–ù–∞–∑–∞–¥ –≤ –º–µ–Ω—é</button>
</div>

<!-- –ü–æ–¥–º–µ–Ω—é –ì–î–ó -->
<div class="container submenu hidden" id="gdzMenu">
  <iframe id="gdzFrame" src="" sandbox="allow-same-origin allow-scripts allow-popups" allowfullscreen></iframe>
  <button class="backBtn">–ù–∞–∑–∞–¥ –≤ –º–µ–Ω—é</button>
</div>

<audio id="audio" controls class="hidden"></audio>
<video id="video" controls class="hidden"></video>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/12.0.0/firebase-app.js";
  import { getDatabase, ref, get, set, remove } from "https://www.gstatic.com/firebasejs/12.0.0/firebase-database.js";

  const firebaseConfig = {
    apiKey: "AIzaSyBTcH3_tri2L7AHLh1e-YD-0s-QSthuE6Q",
    authDomain: "disk-c98ee.firebaseapp.com",
    projectId: "disk-c98ee",
    storageBucket: "disk-c98ee.appspot.com",
    messagingSenderId: "59577059636",
    appId: "1:59577059636:web:e98f456d054cc360747d61",
    databaseURL: "https://disk-c98ee-default-rtdb.firebaseio.com"
  };

  const app = initializeApp(firebaseConfig);
  const db = getDatabase(app);

  // –≠–ª–µ–º–µ–Ω—Ç—ã DOM
  const intro = document.getElementById('intro');
  const auth = document.querySelector('.auth');
  const menu = document.querySelector('.menu');
  const musicMenu = document.getElementById('musicMenu');
  const videoMenu = document.getElementById('videoMenu');
  const asalMenu = document.getElementById('asalMenu');
  const gdzMenu = document.getElementById('gdzMenu');
  const audio = document.getElementById('audio');
  const video = document.getElementById('video');
  const gdzFrame = document.getElementById('gdzFrame');
  const tokenInput = document.getElementById('tokenInput');
  const loginBtn = document.getElementById('loginBtn');
  const logoutBtn = document.getElementById('logoutBtn');
  const adminBtn = document.getElementById('adminBtn');
  const backButtons = document.querySelectorAll('.backBtn');

  // –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å —ç–ª–µ–º–µ–Ω—Ç —Å –∞–Ω–∏–º–∞—Ü–∏–µ–π
  function showElement(el) {
    el.classList.remove('hidden');
    setTimeout(() => el.classList.add('visible'), 20);
  }
  // –°–∫—Ä—ã–≤–∞—Ç—å —ç–ª–µ–º–µ–Ω—Ç —Å –∞–Ω–∏–º–∞—Ü–∏–µ–π
  function hideElement(el) {
    el.classList.remove('visible');
    setTimeout(() => el.classList.add('hidden'), 300);
  }

  // –ò–Ω—Ç—Ä–æ, –ø–æ—Å–ª–µ 3 —Å–µ–∫—É–Ω–¥ –ø–æ–∫–∞–∑–∞—Ç—å —Ñ–æ—Ä–º—É –≤—Ö–æ–¥–∞
  window.onload = () => {
    setTimeout(() => {
      intro.style.opacity = '0';
      setTimeout(() => {
        intro.style.display = 'none';
        showElement(auth);
      }, 1000);
    }, 3000);
  };

  // –õ–æ–≥–∏–Ω –ø–æ —Ç–æ–∫–µ–Ω—É
  loginBtn.onclick = () => {
    const token = tokenInput.value.trim();
    if (!token) return alert('–í–≤–µ–¥–∏—Ç–µ —Ç–æ–∫–µ–Ω');
    get(ref(db, 'tokens/' + token)).then(snapshot => {
      if (snapshot.exists()) {
        remove(ref(db, 'tokens/' + token));
        hideElement(auth);
        showElement(menu);
        tokenInput.value = '';
        // –ê–≤—Ç–æ –ø—Ä–æ–∏–≥—Ä—ã–≤–∞–Ω–∏–µ –ø–µ—Å–Ω–∏ ppol.mp3
        audio.src = 'ppol.mp3';
        audio.classList.remove('hidden');
        video.classList.add('hidden');
        audio.play();
      } else {
        alert('–ù–µ–≤–µ—Ä–Ω—ã–π —Ç–æ–∫–µ–Ω');
      }
    });
  };

  // –ù–∞–≤–∏–≥–∞—Ü–∏—è –º–µ–Ω—é
  document.querySelectorAll('[data-menu]').forEach(btn => {
    btn.onclick = () => {
      hideElement(menu);
      hideElement(audio);
      hideElement(video);
      document.querySelectorAll('.submenu').forEach(sm => hideElement(sm));
      const target = btn.getAttribute('data-menu');
      if (target === 'gdzMenu') {
        gdzFrame.src = 'https://rdc-cdn.lms.macmillaneducation.com/wp-content/uploads/sites/8/2014/03/Bey_B1_WBAK.pdf.pdf';
      } else {
        gdzFrame.src = '';
      }
      showElement(document.getElementById(target));
    };
  });

  // –ö–Ω–æ–ø–∫–∏ –Ω–∞–∑–∞–¥
  backButtons.forEach(btn => {
    btn.onclick = () => {
      document.querySelectorAll('.submenu').forEach(sm => hideElement(sm));
      hideElement(audio);
      hideElement(video);
      gdzFrame.src = '';
      showElement(menu);
    };
  });

  // –í–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –∞—É–¥–∏–æ
  document.querySelectorAll('[data-audio]').forEach(btn => {
    btn.onclick = () => {
      audio.src = btn.getAttribute('data-audio');
      audio.classList.remove('hidden');
      video.classList.add('hidden');
      audio.play();
    };
  });

  // –í–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –≤–∏–¥–µ–æ
  document.querySelectorAll('[data-video]').forEach(btn => {
    btn.onclick = () => {
      video.src = btn.getAttribute('data-video');
      video.classList.remove('hidden');
      audio.classList.add('hidden');
      video.play();
    };
  });

  // –í—ã—Ö–æ–¥ (–ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã)
  logoutBtn.onclick = () => {
    location.reload();
  };

  // --- –ü–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∞ ---
  // –°–æ–∑–¥–∞—ë–º –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å
  const adminPanel = document.createElement('div');
  adminPanel.style.position = 'fixed';
  adminPanel.style.top = '40px';
  adminPanel.style.left = '20px';
  adminPanel.style.background = 'rgba(255,255,255,0.1)';
  adminPanel.style.padding = '10px';
  adminPanel.style.borderRadius = '8px';
  adminPanel.style.zIndex = '10000';
  adminPanel.style.width = '90vw';
  adminPanel.style.maxWidth = '320px';
  adminPanel.style.display = 'none';
  adminPanel.id = 'adminPanel';

  // –ö–Ω–æ–ø–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è —Ç–æ–∫–µ–Ω–∞
  const createTokenBtn = document.createElement('button');
  createTokenBtn.textContent = '–°–æ–∑–¥–∞—Ç—å —Ç–æ–∫–µ–Ω (2 —Å–∏–º–≤–æ–ª–∞)';
  adminPanel.appendChild(createTokenBtn);

  // –°–ø–∏—Å–æ–∫ —Ç–æ–∫–µ–Ω–æ–≤
  const tokenList = document.createElement('ul');
  adminPanel.appendChild(tokenList);

  // –ö–Ω–æ–ø–∫–∞ –Ω–∞–∑–∞–¥
  const backAdminBtn = document.createElement('button');
  backAdminBtn.textContent = '–ù–∞–∑–∞–¥';
  adminPanel.appendChild(backAdminBtn);

  document.body.appendChild(adminPanel);

  // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —Ç–æ–∫–µ–Ω–æ–≤
  function refreshTokenList() {
    get(ref(db, 'tokens')).then(snap => {
      tokenList.innerHTML = '';
      if (snap.exists()) {
        const tokens = snap.val();
        Object.keys(tokens).forEach(tk => {
          const li = document.createElement('li');
          li.textContent = tk;
          tokenList.appendChild(li);
        });
      } else {
        const li = document.createElement('li');
        li.textContent = '–ù–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã—Ö —Ç–æ–∫–µ–Ω–æ–≤';
        tokenList.appendChild(li);
      }
    });
  }

  // –°–æ–∑–¥–∞–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞
  createTokenBtn.onclick = () => {
    // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è 2 —Å–∏–º–≤–æ–ª–æ–≤ a-z0-9
    const token = Math.random().toString(36).slice(2,4);
    set(ref(db, 'tokens/' + token), true).then(() => {
      refreshTokenList();
      alert('–°–æ–∑–¥–∞–Ω —Ç–æ–∫–µ–Ω: ' + token);
    });
  };

  backAdminBtn.onclick = () => {
    adminPanel.style.display = 'none';
    showElement(auth);
  };

  adminBtn.onclick = () => {
    if (adminPanel.style.display === 'none') {
      const pass = prompt('–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å –¥–ª—è –∫—Ä–µ–∞—Ç–æ—Ä–∞:');
      if (pass === 'V') {
        adminPanel.style.display = 'block';
        hideElement(auth);
        hideElement(menu);
        refreshTokenList();
        alert('–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –ø–∞–Ω–µ–ª—å —Å–æ–∑–¥–∞—Ç–µ–ª—è!');
      } else {
        alert('–ù–µ–≤–µ—Ä–Ω—ã–π –ø–∞—Ä–æ–ª—å');
      }
    } else {
      adminPanel.style.display = 'none';
      showElement(auth);
    }
  };
</script>

</body>
</html>
